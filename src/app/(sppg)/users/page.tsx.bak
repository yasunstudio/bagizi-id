/**
 * @fileoverview Users List Page
 * @module app/(sppg)/users
 * @description Enterprise users list page with filtering and actions
 * 
 * ENTERPRISE FEATURES:
 * - Server-side rendering with React 19
 * - Real-time data with TanStack Query
 * - Advanced filtering and search
 * - Responsive layout with breadcrumbs
 * - Action buttons (Create)
 * - Multi-tenant security
 * - Performance optimized
 * 
 * @version Next.js 15.5.4 / React 19.x
 * @author Bagizi-ID Development Team
 * @see {@link /docs/copilot-instructions.md} Page Architecture Guidelines
 */

'use client'

import { Suspense } from 'react'
import { Metadata } from 'next'
import Link from 'next/link'
import { UserCog, Plus } from 'lucide-react'

import { Button } from '@/components/ui/button'
import {
  Card,
  CardContent,
  CardHeader,
} from '@/components/ui/card'
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from '@/components/ui/breadcrumb'
import { Skeleton } from '@/components/ui/skeleton'
import { Separator } from '@/components/ui/separator'

import { UserList } from '@/features/sppg/user/components'

export const metadata: Metadata = {
  title: 'User | User Management',
  description: 'Manajemen user dan hak akses sistem',
}

/**
 * Loading skeleton for user list
 */
function UserListSkeleton() {
  return (
    <Card>
      <CardHeader>
        <Skeleton className="h-8 w-48" />
        <Skeleton className="h-4 w-96" />
      </CardHeader>
      <CardContent className="space-y-4">
        <div className="flex gap-4">
          <Skeleton className="h-10 flex-1" />
          <Skeleton className="h-10 w-32" />
        </div>
        <Skeleton className="h-64 w-full" />
      </CardContent>
    </Card>
  )
}

/**
 * Users List Page
 * Route: /users
 */
export default function UsersPage() {
  return (
    <div className="flex flex-col gap-6">
      {/* Page Header */}
      <div className="flex flex-col gap-4">
        {/* Breadcrumbs */}
        <Breadcrumb>
          <BreadcrumbList>
            <BreadcrumbItem>
              <BreadcrumbLink asChild>
                <Link href="/dashboard">Dashboard</Link>
              </BreadcrumbLink>
            </BreadcrumbItem>
            <BreadcrumbSeparator />
            <BreadcrumbItem>
              <BreadcrumbPage>User</BreadcrumbPage>
            </BreadcrumbItem>
          </BreadcrumbList>
        </Breadcrumb>

        {/* Page Title & Actions */}
        <div className="flex items-center justify-between">
          <div className="space-y-1">
            <h1 className="text-3xl font-bold tracking-tight flex items-center gap-3">
              <UserCog className="h-8 w-8 text-primary" />
              Manajemen User
            </h1>
            <p className="text-muted-foreground">
              Kelola user dan hak akses di SPPG Anda
            </p>
          </div>

          <Button asChild>
            <Link href="/users/new">
              <Plus className="mr-2 h-4 w-4" />
              Tambah User
            </Link>
          </Button>
        </div>
      </div>

      <Separator />

      {/* User List */}
      <Suspense fallback={<UserListSkeleton />}>
        <UserList />
      </Suspense>
    </div>
  )
}
